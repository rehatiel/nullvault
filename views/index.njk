{% extends "base.njk" %}

{% block head %}
<script defer src="/index.js"></script>
{% endblock %}

{% block content %}

<!-- Step 1: Create form -->
<div id="stepCreate">

  <div class="secret-header">
    <h1>Share a Secret Securely</h1>
    <p>Create a one-time link that self-destructs after it's opened â€” or set your own expiry.</p>
  </div>

  <!-- Feature badges (informational only) -->
  <div class="security-badges">
    <span class="sec-badge">ğŸ”¥ One-time use</span>
    <span class="sec-badge">ğŸ’¥ Self-destructs</span>
    <span class="sec-badge">â± Auto-expires</span>
  </div>

  <!-- Error message (hidden by default) -->
  <div id="createError" class="warn-box hidden"></div>

  <!-- Secret content -->
  <div class="info-box">
    <div class="form-row">
      <label for="secretInput">Your Secret</label>
      <textarea id="secretInput" rows="5" placeholder="Paste your password, API key, message, or any sensitive textâ€¦" class="secret-textarea"></textarea>
    </div>
  </div>

  <!-- Options row -->
  <div class="options-row">
    <div class="form-row form-row-flex">
      <label for="expiryInput">Expires after</label>
      <select id="expiryInput">
        <option value="1">1 day</option>
        <option value="3">3 days</option>
        <option value="7" selected>7 days</option>
        <option value="14">14 days</option>
        <option value="30">30 days</option>
        <option value="0">Never</option>
      </select>
    </div>
    <div class="form-row form-row-flex">
      <label for="templateInput">Template</label>
      <select id="templateInput">
        <option value="default">Default</option>
        <option value="banking">Banking</option>
        <option value="crypto">Crypto</option>
      </select>
    </div>
  </div>

  <!-- Burn on reveal toggle -->
  <div class="form-row form-row-gap">
    <label class="checkbox-label">
      <input type="checkbox" id="burnInput" />
      <span>Burn after reading â€” destroy after first reveal</span>
    </label>
  </div>


  <button id="createBtn" class="btn btn-primary">ğŸ”’ &nbsp;Generate Secure Link</button>

</div>
<!-- /stepCreate -->

<!-- Step 2: Result (hidden until link is generated) -->
<div id="stepResult" class="hidden">

  <div class="secret-header">
    <h1>âœ… Your secret link is ready</h1>
    <p>Share the <strong>Public Link</strong> with your recipient. Keep the <strong>Control Link</strong> private â€” it lets you monitor access and revoke the secret.</p>
  </div>

  <div class="result-block result-block-gap">
    <div class="result-label">Public Link (share this)</div>
    <div class="result-url" id="resultPublic"></div>
    <button class="copy-btn-flat" id="copyPublic">Copy</button>
  </div>

  <div class="result-block result-block-control result-block-gap-lg">
    <div class="result-label result-label-accent">Control Link (keep private)</div>
    <div class="result-url" id="resultControl"></div>
    <button class="copy-btn-flat" id="copyControl">Copy</button>
  </div>

  <div class="warn-box warn-box-gap">
    âš ï¸ This link will self-destruct after it is opened once. You cannot retrieve the secret again after that.
  </div>

  <button id="createAnother" class="btn btn-secondary">+ Create Another Secret</button>

</div>
<!-- /stepResult -->

{% endblock %}
